---
title: "Team ACDC Case Study 6: Spam Ham, Problem 19"
author: "David Josephs, Andy Heroy, Carson Drake, Che' Cobb"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true
    number_sections: true
    theme: readable
    highlight: haddock
    code_folding: hide
    df_print: paged
    keep_md: TRUE
    fig_width: 10
    fig_height: 10
    fig_retina: true
    fig_caption: true
---


```{r setup, include = F}
knitr::opts_chunk$set(warning = F, message = F, dev = "svg", fig.align = "center")
knitr::opts_chunk$set(tidy = T)
knitr::opts_chunk$set(comment = '#>')
options(digits = 2)

```

# Introduction


## Data Description


```{r dataload}
# we are starting from here, 
# the code used to create the RDA will be shown in the appendix, 
# it seems to run fine on windows but crash on linux
# so this was a good compromise without digging too deeply into the web of 
# lapplys
load("./Data/data.Rda")
emails <- emailDFrp
# probably do the n
# This function...  is strange.
setupRnum = function(data) {
  logicalVars = which(sapply(data, is.logical))
  facVars = lapply(data[ , logicalVars], 
                   function(x) {
                      x = as.numeric(x)
                   })
  cbind(facVars, data[ , - logicalVars])
}

emails = setupRnum(emails)
dim(emails)
emails[is.na(emails)]<-0
df_process <- emails

```

# Analysis

## Minimum Split

```{r}
library(rpart)
library(caret)
library(dplyr)
library(rpart.plot)
set.seed(54)

is_Spam <- table(df_process$isSpam)["T"]
is_Ham <- table(df_process$isSpam)["F"]

testSpamidx = sample(is_Spam, size = floor(is_Spam/3))
testHamidx = sample(is_Ham, size = floor(is_Ham/3))

df_test_rpart = rbind(df_process[df_process$isSpam == "T",][testSpamidx,],
                      df_process[df_process$isSpam == "F",][testHamidx, ])

df_train_rpart = rbind(df_process[df_process$isSpam == "T",][-testSpamidx,],
                      df_process[df_process$isSpam == "F",][-testHamidx, ])

dim(df_train_rpart)

rpart_fit = rpart(isSpam ~ ., data = df_train_rpart, method = "class")

prp(rpart_fit, extra = 106)




```
Minsplit vs ntrees and accuracy/related metrics

## Ratio of minsplit and minbuxkets
normally its 3:1, see what happens

## Complexity and interaction with minsplit

### Lots o trees

### Few o trees

## Maxdepth

### Deep and wide

### Deep and narrow

### Short and wide

### Short and narrow

## Surragets
maybe
##xval
maybe

# Conclusion

Use cases for interesitng chouces
